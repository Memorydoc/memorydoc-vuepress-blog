---
title: 优雅写代码三
date: 2022-03-07 22:09:52
permalink: /pages/7a6da21/
titleTag: 原创
categories: 
  - 技术架构
  - 技术拓展
tags: 
  - 
---

## 怎么更好的避免if else 语句？

### 实现 InitializingBean 接口
### 创建业务枚举
``` java

public enum BizTypeEnum {
PRODUCT(1, "商品"),
SHOP(2, "店铺"),
CONTENT(3, "内容");

    private Integer type;
    private String desc;

    private BizTypeEnum(Integer type, String desc) {
        this.type = type;
        this.desc = desc;
    }

    public static BizTypeEnum indexOf(Integer type) {
        BizTypeEnum[] var1 = values();
        int var2 = var1.length;

        for(int var3 = 0; var3 < var2; ++var3) {
            BizTypeEnum item = var1[var3];
            if (item.getType().equals(type)) {
                return item;
            }
        }

        return null;
    }

    public Integer getType() {
        return this.type;
    }

    public String getDesc() {
        return this.desc;
    }
}

```

### 创建业务缓存
```java 
    /**
     * 关注写操作服务 关注
     */
    private final Map<BizTypeEnum, Function<FollowCollectRequest, BaseResult>> FOLLOW_WRITE_FUNCTION_MAP = new HashMap<>();
```
### 重写 afterPropertiesSet
```java  
    @Override
    public void afterPropertiesSet() throws Exception {
        this.FOLLOW_WRITE_FUNCTION_MAP.put(BizTypeEnum.PRODUCT, (request) -> this.followProductCollectWriteApi.follow(request));
        this.FOLLOW_WRITE_FUNCTION_MAP.put(BizTypeEnum.SHOP, (request) -> this.followShopCollectWriteApi.follow(request));
        this.UN_FOLLOW_WRITE_FUNCTION_MAP.put(BizTypeEnum.PRODUCT, (request) -> this.followShopCollectWriteApi.unfollow(request));
        this.UN_FOLLOW_WRITE_FUNCTION_MAP.put(BizTypeEnum.SHOP, (request) -> this.followShopCollectWriteApi.unfollow(request));
    }
```

### 使用
```java 
/**
 * 获取结果
 */
private BaseResult getResult(FollowCollectRequest request) {
    return this.FOLLOW_WRITE_FUNCTION_MAP.get(request.getBizType()).apply(request);
}
```
